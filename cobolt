#!/bin/bash
# Cobolt VCS executable wrapper

# Get the directory where this script is located
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

# Try to find the JAR - check installed location first, then project location
if [ -f "$SCRIPT_DIR/cobolt.jar" ]; then
    JAR_PATH="$SCRIPT_DIR/cobolt.jar"
elif [ -f "$SCRIPT_DIR/target/cobolt.jar" ]; then
    JAR_PATH="$SCRIPT_DIR/target/cobolt.jar"
else
    echo "Error: cobolt.jar not found"
    echo "Searched in:"
    echo "  - $SCRIPT_DIR/cobolt.jar (installed location)"
    echo "  - $SCRIPT_DIR/target/cobolt.jar (build location)"
    echo "Please run 'mvn package' or './install.sh' first"
    exit 1
fi

# Run the JAR with all arguments passed through
exec java -jar "$JAR_PATH" "$@"
